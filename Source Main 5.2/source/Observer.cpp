//*****************************************************************************
// File: Observer.cpp
//
// Desc: implementation of the CObserver, CSubject class.
//
// producer: Ahn Sang-Kyu
//*****************************************************************************

#include "MUMain/stdafx.h"
#include "Observer.h"

//*****************************************************************************
// CObserver
//*****************************************************************************

//////////////////////////////////////////////////////////////////////
// Construction/Destruction
//////////////////////////////////////////////////////////////////////

CObserver::CObserver()
{
}

CObserver::~CObserver()
{
}

//*****************************************************************************
// CSubject
//*****************************************************************************

//////////////////////////////////////////////////////////////////////
// Construction/Destruction
//////////////////////////////////////////////////////////////////////

CSubject::CSubject()
{
}

CSubject::~CSubject()
{
}

//*****************************************************************************
// �Լ� �̸� : Attach()
// �Լ� ���� : ������ ����Ʈ�� �߰�.
//			   (������Ʈ �ڽ� Ŭ���� ������ ȣ���ϴ� ���� ����.)
// �Ű� ���� : pObserver	: ������ ������Ʈ�� ������.
//*****************************************************************************
void CSubject::Attach(CObserver* pObserver)
{
    m_ObserverList.AddTail(pObserver);
}

//*****************************************************************************
// �Լ� �̸� : Attach()
// �Լ� ���� : ������ ����Ʈ���� ����.
//			   (������Ʈ �ڽ� Ŭ���� ������ ���� ȣ���ϴ� ���� ����.)
// �Ű� ���� : pObserver	: ������ ������Ʈ�� ������.
//*****************************************************************************
void CSubject::Detach(CObserver* pObserver)
{
    NODE* pPos = m_ObserverList.Find(pObserver);
    if (pPos)
        m_ObserverList.RemoveAt(pPos);
}

//*****************************************************************************
// �Լ� �̸� : Notify()
// �Լ� ���� : ����Ʈ�� ��ȸ�ϸ� �������� UpdateData(this)ȣ��.
//			   (������Ʈ ���� ��ȭ�� ���� �� ȣ���ϸ� ��.)
//*****************************************************************************
void CSubject::Notify()
{
    CObserver* pObserver;
    NODE* pPos = m_ObserverList.GetHeadPosition();
    while (pPos)
    {
        pObserver = (CObserver*)m_ObserverList.GetNext(pPos);
        pObserver->UpdateData(this);
    }
}